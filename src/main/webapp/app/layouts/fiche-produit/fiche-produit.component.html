@if (isConnected) {
  <button class="back-button" (click)="goback()"><i class="fa-solid fa-reply"></i> Retour aux produits</button>

  <div class="tcg-product-wrapper">
    <div class="tcg-card-frame">
      <div class="tcg-title-banner">
        <h1>{{ product.name }}</h1>
      </div>

      <div class="tcg-card-inner">
        <div class="tcg-image-zone">
          <div class="tcg-image-frame" (mousemove)="handleMouseMove($event)" (mouseleave)="showZoom = false">
            @if (images.length > 1) {
              <button class="tcg-carousel-btn left no-zoom" (click)="prevImage()">&#10094;</button>
            }

            <img [src]="images[currentIndex]" class="tcg-image" alt="img" />

            @if (images.length > 1) {
              <button class="tcg-carousel-btn right no-zoom" (click)="nextImage()">&#10095;</button>
            }

            <div class="foil-overlay"></div>
          </div>
        </div>

        <div class="tcg-info-zone">
          @if (!showZoom) {
            <div class="tcg-details-panel">
              <p class="tcg-desc">{{ product.desc }}</p>

              <p class="tcg-price">{{ product.price }} â‚¬</p>

              <p class="tcg-stock" [class.out]="(product.quantity ?? 0) <= 0">
                {{ (product.quantity ?? 0) > 0 ? 'En stock : ' + product.quantity : 'Rupture de stock' }}
              </p>

              <button class="tcg-add-button" id="addButton" (click)="addToCart(product.id)" [disabled]="(product.quantity ?? 0) === 0">
                Ajouter au panier
              </button>
              @if (product.id !== -1) {
                <jhi-comment [productId]="product.id"></jhi-comment>
              }
            </div>

            <div class="notif-container">
              @for (msg of successMessages; track msg) {
                <div class="feedback-message">
                  <i class="fa-solid fa-circle-check"></i>
                  {{ msg }}
                </div>
              }
            </div>
          } @else {
            <div class="tcg-zoom-panel">
              <div
                class="tcg-zoom-image"
                [ngStyle]="{
                  'background-image': 'url(' + images[currentIndex] + ')',
                  'background-position': backgroundPosition,
                  'background-size': zoomLevel + '%',
                }"
              ></div>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
} @else {
  <jhi-login redirectUrl="/fiche_produit/{{ product.id }}"></jhi-login>
}
