@if (isConnected) {

  <button class="back-button" (click)="goback()">
    <i class="fa-solid fa-reply"></i> Retour au panier
  </button>

  <div class="payment-wrapper">

    <div class="tcg-payment-frame">

      <form [formGroup]="paymentForm" (ngSubmit)="submit()" class="tcg-form">

        <div formGroupName="delivery" class="tcg-section">
          <div class="tcg-section-title">Adresse de livraison</div>
          <jhi-adress-form [adresseForm]="deliveryForm()" [account]="account"></jhi-adress-form>
        </div>

        <div class="tcg-toggle-row">
          <label class="tcg-switch">
            <input type="checkbox" formControlName="sameAdress" />
            <span class="slider"></span>
          </label>

          <span class="toggle-label">
            Adresse de facturation identique Ã  l'adresse de livraison
          </span>
        </div>

        <div *ngIf="!isSameAdress()" formGroupName="billing" class="tcg-section">
          <div class="tcg-section-title">Adresse de facturation</div>
          <jhi-adress-form [adresseForm]="billingForm()"></jhi-adress-form>
        </div>

        <div class="tcg-section">
          <div class="tcg-section-title">Paiement</div>
          <div id="card-element" class="card-element"></div>
          <div id="card-errors" class="tcg-error-message"></div>
        </div>

        <button type="submit" class="tcg-pay-button" [disabled]="isProcessing">
          <i class="fa-solid fa-credit-card"></i>
          {{ isProcessing ? 'Paiement en cours...' : 'Valider et payer' }}
        </button>

        <div *ngIf="message" class="message">{{ message }}</div>

      </form>

    </div>

  </div>

} @else {
  <jhi-login redirectUrl="payment"></jhi-login>
}
